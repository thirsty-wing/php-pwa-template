#!/usr/bin/env php
<?php
// Work in progress


$commands = "commands:\n" .
"  make migration [migration name]\n" .
"  do migration\n" .
"  undo migration\n";

if (count($argv) < 3) {
  echo $commands;
  exit(1);
}


switch ("$argv[1] $argv[2]") {
  case "make migration":
    if (count($argv) < 4) {
      echo "you must provide the name for the migration\n";
      exit(1);
    }
    $datetime = (new DateTime())->setTimezone(new DateTimeZone('Z'));
    $datetime_str = $datetime->format('Y-m-d\TH:i:sp');
    touch("database/migrations/$datetime_str-$argv[3].up.sql");
    touch("database/migrations/$datetime_str-$argv[3].down.sql");
    break;
  case "show migration":
    
  default:
    echo $commands;
}
